(this.webpackJsonpamazing_store=this.webpackJsonpamazing_store||[]).push([[0],{52:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n(22),o=n.n(a),s=n(10),i=n(3),u=n(18),l=n(41),d=n(5),h=n(6),p=n(7),j=n(9),b=n(8),O=(n(52),n(2)),f="SHOW_LOGIN",m="HIDE_LOGIN",g="LOG_IN_AS_USER",v="LOG_IN_AS_MANAGER",x="LOG_OUT",y="SHOW_SEARCHBOX_ON_TOOLBAR",C="HIDE_SEARCHBOX_ON_TOOLBAR",w="CLOSE_ERROR",N="RESET_RESULTS",T="START_FETCH",F="FAIL_FETCH",k="FETCH_STORE",S="POST_NEW_PRODUCT",A="DELETE_PRODUCT",P="SEARCH_BUYING",H="ADD_TO_CART",L="REMOVE_FROM_CART",E="CHANGE_QUANTITY",B=n(42),_=n.n(B).a.create({baseURL:"https://amazing-store-dcf57-default-rtdb.firebaseio.com/"}),D=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")},U=function(){return{type:C}},M=function(){return{type:w}},R=function(){return{type:T}},I=function(e){return{type:F,error:e}},q=function(){return function(e){e(R()),_.get("/store.json").then((function(t){var n;e((n=t.data,{type:k,store:n}))})).catch((function(t){return e(I(t))}))}},W=function(e,t,n,r){return{type:S,newProduct:e,category:t,id:n,categoryName:r}},G=function(e,t,n){return function(r){r(R()),_.put("/store/"+e+"/.json",{}).then(r(function(e,t){return{type:A,category:e,id:t}}(t,n))).catch((function(e){r(I(e))}))}},Q=(n(70),function(e){return e.show?Object(r.jsx)("div",{className:"backdrop",onClick:e.closing}):null}),V=(n(71),function(e){return Object(r.jsx)("div",{className:"close-button",children:Object(r.jsx)("span",{onClick:e.closeClicked,style:{color:e.color}})})}),Y=(n(72),function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Q,{show:e.show,closing:e.modalClosing}),Object(r.jsxs)("div",{className:"modal",style:{display:e.show?"block":"none"},children:[Object(r.jsx)(V,{closeClicked:e.modalClosing,color:"#000000"}),e.children]})]})}),$=(n(73),function(e){var t=null;switch(e.elementType){case"input":t=Object(r.jsx)("input",Object(O.a)(Object(O.a)({onChange:e.changed,className:"input-element"},e.elementConfig),{},{value:e.value}));break;case"textarea":t=Object(r.jsx)("textarea",Object(O.a)(Object(O.a)({onChange:e.changed,onBlur:e.blurred,className:"input-element"},e.elementConfig),{},{value:e.value}));break;case"select":var n=e.elementConfig.options.map((function(e){return Object(r.jsx)("option",{value:e.value,children:e.displayValue},e.value)}));t=Object(r.jsxs)("select",{onChange:e.changed,onBlur:e.blurred,className:"input-element",value:e.value,children:[Object(r.jsx)("option",{children:"Select an option"}),n]});break;default:t=Object(r.jsx)("input",Object(O.a)(Object(O.a)({onChange:e.changed,onBlur:e.blurred,className:"input-element"},e.elementConfig),{},{value:e.value}))}return Object(r.jsxs)("div",{className:"input-component",children:[Object(r.jsxs)("label",{children:[e.elementConfig.placeholder,":"]}),t]})}),z=(n(74),function(e){return Object(r.jsx)("button",{onClick:e.clicked,className:e.btnType+" button",children:e.children})}),X=(n(75),function(e,t,n,r,c){return"input"===e?{elementType:e,elementConfig:{type:t,placeholder:n},value:c||""}:{elementType:e,elementConfig:Object(O.a)(Object(O.a)({},r),{},{placeholder:n}),value:c||""}}),J=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={loginForm:{username:X("input","text","Username"),password:X("input","text","Password")},wrongAuth:!1},e.inputChangedHandler=function(t,n){var r=Object(O.a)({},e.state.loginForm),c=Object(O.a)({},r[n]);c.value=t.target.value,r[n]=c,e.setState({loginForm:r})},e.loginHandler=function(t){t.preventDefault(),"client"===e.state.loginForm.username.value&&"client"===e.state.loginForm.password.value?e.props.logInAsUser():"manager"===e.state.loginForm.username.value&&"manager"===e.state.loginForm.password.value?(e.props.logInAsManager(),e.props.history.push("/manage-products-list")):e.setState({wrongAuth:!0})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=[];for(var n in this.state.loginForm)t.push({id:n,info:this.state.loginForm[n]});var c=t.map((function(t){return Object(r.jsx)($,{elementType:t.info.elementType,elementConfig:t.info.elementConfig,value:t.info.value,changed:function(n){return e.inputChangedHandler(n,t.id)}},t.id)})),a=this.state.wrongAuth?Object(r.jsx)("p",{className:"wrong-auth",children:"Wrong username or password. PS: Use 'client' or 'manager' as username and password to login."}):null;return Object(r.jsx)(Y,{show:this.props.showLogin,modalClosing:this.props.hideLogin,children:Object(r.jsxs)("div",{className:"login-container",children:[Object(r.jsx)("p",{children:"Welcome"}),a,Object(r.jsxs)("form",{onSubmit:this.loginHandler,children:[c,Object(r.jsxs)("div",{className:"buttons-container",children:[Object(r.jsx)(z,{btnType:"ghosted",clicked:this.props.hideLogin,children:"Cancel"}),Object(r.jsx)(z,{btnType:"filled",clicked:this.loginHandler,children:"Log In"})]})]})]})})}}]),n}(c.Component),Z=Object(i.b)((function(e){return{showLogin:e.showLogin}}),(function(e){return{hideLogin:function(){return e({type:m})},logInAsUser:function(){return e({type:g})},logInAsManager:function(){return e({type:v})}}}))(Object(d.f)(J)),K=(n(77),n.p+"static/media/cart-icon.1fdc0147.svg"),ee=(n(78),Object(i.b)((function(e){return{cart:e.cart}}))((function(e){var t=0;return e.cart.forEach((function(e){t+=parseInt(e.quantity)})),Object(r.jsxs)("div",{className:"cart",style:{width:e.width},children:[Object(r.jsx)("img",{src:K,alt:"Cart"}),Object(r.jsx)("p",{className:"counter",children:t})]})}))),te=Object(i.b)((function(e){return{cart:e.cart,authAsUser:e.authAsUser,authAsManager:e.authAsManager}}),(function(e){return{showLogin:function(){return e({type:f})},logOut:function(){e({type:x})}}}))(Object(d.f)((function(e){var t=function(){e.logOut(),e.history.push("/")},n=e.authAsUser?Object(r.jsx)("li",{onClick:e.closeTheMenu,children:Object(r.jsx)("div",{className:"link",onClick:t,children:"Log Out"})}):Object(r.jsx)("li",{onClick:e.closeTheMenu,children:Object(r.jsx)("div",{className:"link",onClick:e.showLogin,children:"Log In"})}),c=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("li",{children:Object(r.jsx)(s.c,{onClick:e.closeTheMenu,className:"link",to:"/",exact:!0,activeClassName:"active",children:"Home"})}),Object(r.jsx)("li",{children:Object(r.jsxs)(s.c,{onClick:e.closeTheMenu,className:"link",to:"/cart",activeClassName:"active",children:["Cart ",Object(r.jsx)(ee,{width:"30px"})]})}),n]});return e.authAsManager&&(c=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("li",{children:Object(r.jsx)(s.c,{onClick:e.closeTheMenu,className:"link",to:"/add-products",activeClassName:"active",children:"Add Products"})}),Object(r.jsx)("li",{children:Object(r.jsx)(s.c,{onClick:e.closeTheMenu,className:"link",to:"/manage-products-list",activeClassName:"active",children:"Products List"})}),Object(r.jsx)("li",{onClick:e.closeTheMenu,children:Object(r.jsx)("div",{className:"link",onClick:t,children:"Log Out"})})]})),Object(r.jsx)("ul",{className:"nav-items",children:c})}))),ne=n.p+"static/media/logo.42be5df0.png",re=(n(79),function(){return Object(r.jsx)("div",{className:"logo",children:Object(r.jsx)("img",{src:ne,alt:"Amazing Store Logo"})})}),ce=(n(80),function(e){return Object(r.jsxs)("div",{className:"menu-button",children:[Object(r.jsx)("div",{className:"menu-bar",style:{backgroundColor:e.color}}),Object(r.jsx)("div",{className:"menu-bar",style:{backgroundColor:e.color}}),Object(r.jsx)("div",{className:"menu-bar",style:{backgroundColor:e.color}})]})}),ae=n(16),oe=(n(81),n.p+"static/media/search_icon.d31628c8.svg"),se=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={searchForm:{search:{elementType:"input",elementConfig:{type:"text",placeholder:"Search products..."},value:""}}},e.inputChangedHandler=function(t){var n=Object(O.a)({},e.state.searchForm),r=Object(O.a)({},n.search);r.value=t.target.value,n.search=r,e.setState({searchForm:n})},e.searchHandler=function(t){t.preventDefault(),e.props.store?(""!==e.state.searchForm.search.value&&e.props.searchBuying(e.state.searchForm.search.value,e.props.store),e.props.history.push({pathname:"/",hash:"#results"})):alert("Please reload your page and be sure to have an internet conection.")},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=null;this.props.loading?t="Loading...":this.props.store&&(t=[],Object.keys(this.props.store).forEach((function(n){if(e.props.store[n].products)for(var c=e.props.store[n].products,a=0,o=Object.entries(c);a<o.length;a++){var i=Object(ae.a)(o[a],2),u=(i[0],i[1]);(u.productName+u.category).toLowerCase().includes(e.state.searchForm.search.value.toLowerCase())&&e.state.searchForm.search.value.length>1&&t.length<6&&t.push(Object(r.jsx)(s.b,{to:"/product/"+u.ref,children:Object(r.jsx)("li",{children:u.productName})},u.ref))}})));var n=null;if(!this.props.hide){var c=this.state.searchForm.search;n=Object(r.jsx)("div",{className:"search-box-component-container",children:Object(r.jsxs)("form",{onSubmit:function(t){e.searchHandler(t)},children:[Object(r.jsxs)("div",{className:"search-box",children:[Object(r.jsx)($,{elementType:c.elementType,elementConfig:c.elementConfig,value:c.value,changed:function(t){return e.inputChangedHandler(t)}}),Object(r.jsx)("div",{onClick:function(t){e.searchHandler(t)},children:Object(r.jsx)("img",{src:oe,alt:"Search icon"})})]}),Object(r.jsx)("ul",{className:"results-overview-container",children:t})]})})}return n}}]),n}(c.Component),ie=Object(i.b)((function(e){return{loading:e.loading,store:e.store}}),(function(e){return{searchBuying:function(t,n){return e(function(e,t){return{type:P,quest:e,store:t}}(t,n))}}}))(Object(d.f)(se)),ue=(n(82),Object(i.b)((function(e){return{searchBoxOnToolbar:e.searchBoxOnToolbar}}))((function(e){return Object(r.jsxs)("div",{className:"toolbar",children:[Object(r.jsx)("div",{className:"menu-button-container",onClick:e.menuButtonOpen,children:Object(r.jsx)(ce,{})}),Object(r.jsx)("div",{className:"logo-container",children:Object(r.jsx)(s.c,{to:"/",children:Object(r.jsx)(re,{})})}),Object(r.jsx)("div",{className:"search-box-container",children:Object(r.jsx)(ie,{hide:!e.searchBoxOnToolbar})}),Object(r.jsx)("nav",{children:Object(r.jsx)(te,{})})]})}))),le=(n(83),function(e){var t=e.show?"side-drawer open":"side-drawer close";return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Q,{show:e.show,closing:e.sideDrawerClosing}),Object(r.jsxs)("div",{className:t,children:[Object(r.jsx)(V,{closeClicked:e.sideDrawerClosing}),Object(r.jsx)("div",{className:"logo-container",children:Object(r.jsx)(re,{})}),Object(r.jsx)("nav",{children:Object(r.jsx)(te,{closeTheMenu:e.sideDrawerClosing})})]})]})}),de=Object(i.b)((function(e){return{error:e.error}}),(function(e){return{closeError:function(){return e(M())},fetchStoreFetcher:function(){return e(q())}}}))((function(e){return Object(r.jsxs)(Y,{show:e.error,modalClosing:function(){e.closeError(),e.fetchStoreFetcher()},children:[e.error,Object(r.jsx)("p",{children:"Please be sure to have an internet conection, until that happens, you won't be able to close this modal."})]})})),he=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={menuOpen:!1},e.menuCloseHandler=function(){e.setState({menuOpen:!1})},e.menuOpenHandler=function(){e.setState({menuOpen:!0})},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(le,{show:this.state.menuOpen,sideDrawerClosing:this.menuCloseHandler}),Object(r.jsx)(ue,{menuButtonOpen:this.menuOpenHandler}),Object(r.jsx)(Z,{}),Object(r.jsx)("main",{className:"content",children:this.props.children}),Object(r.jsx)(de,{})]})}}]),n}(c.Component),pe=Object(i.b)((function(e){return{authAsManager:e.authAsManager}}))(he),je=(n(84),n(85),function(){return Object(r.jsxs)("div",{className:"jumbotron",children:[Object(r.jsx)("h1",{children:"What's your next purchase?"}),Object(r.jsx)("div",{className:"search-box-container",children:Object(r.jsx)(ie,{})})]})}),be=(n(86),function(e){return Object(r.jsxs)("div",{className:"product-on-buying-list",children:[Object(r.jsx)("h4",{children:e.title}),Object(r.jsxs)("p",{children:["US $",e.price]})]})}),Oe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={},e.searchBoxOnToolbarHandler=function(){window.pageYOffset>=350&&!1===e.props.searchBoxOnToolbar?e.props.showSearchBoxOnToolbar():window.pageYOffset<350&&!0===e.props.searchBoxOnToolbar&&e.props.hideSearchBoxOnToolbar()},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchStoreFetcher(),window.innerWidth>=600&&(this.props.hideSearchBoxOnToolbar(),window.addEventListener("scroll",this.searchBoxOnToolbarHandler))}},{key:"componentDidUpdate",value:function(){var e=document.body.scrollHeight<490?document.body.scrollHeight:490;window.scrollTo({top:e,left:0,behavior:"smooth"})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.searchBoxOnToolbarHandler,!0),this.props.showSearchBoxOnToolbar()}},{key:"render",value:function(){var e=null,t=[];return this.props.results&&(this.props.results.forEach((function(e){t.push(Object(r.jsx)(s.b,{to:"/product/"+e.ref,children:Object(r.jsx)(be,{title:e.productName,price:e.price})},e.ref))})),e=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(V,{closeClicked:this.props.resetResults,color:"#000000"}),Object(r.jsx)("h2",{id:"results",children:"Results"}),t]})),Object(r.jsxs)("div",{className:"homepage",children:[Object(r.jsx)(je,{}),Object(r.jsx)("div",{className:"buying-list",children:e})]})}}]),n}(c.Component),fe=Object(i.b)((function(e){return{searchBoxOnToolbar:e.searchBoxOnToolbar,results:e.results,error:e.error}}),(function(e){return{showSearchBoxOnToolbar:function(){return e({type:y})},hideSearchBoxOnToolbar:function(){return e(U())},fetchStoreFetcher:function(){return e(q())},resetResults:function(){return e({type:N})}}}))(Oe),me=(n(87),n(88),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={form:{quantity:{elementType:"input",elementConfig:{type:"number",placeholder:"Quantity"},value:""}}},e.inputChangedHandler=function(t){if(t.target.value>=0){var n=Object(O.a)({},e.state.form);n.quantity.value=t.target.value,e.setState({form:n}),t.target.value>0&&e.props.changeQuantity(t.target.value,e.props.index)}},e.inputBlurredHandler=function(){if(0===e.state.form.quantity.value||isNaN(e.state.form.quantity.value)){var t=Object(O.a)({},e.state.form);t.quantity.value=1,e.props.changeQuantity(1,e.props.index),e.setState({form:t})}},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(O.a)({},this.state.form);e.quantity.value=this.props.quantity,this.setState({form:e})}},{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{className:"product-on-cart-list",children:[Object(r.jsx)("span",{className:"remove",onClick:this.props.clicked,children:"Remove"}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:this.props.name}),Object(r.jsxs)("p",{className:"price",children:["US $",this.props.price]})]}),Object(r.jsx)("div",{className:"quantity-controller",children:Object(r.jsx)($,{elementType:this.state.form.quantity.elementType,elementConfig:this.state.form.quantity.elementConfig,value:this.state.form.quantity.value,changed:function(t){return e.inputChangedHandler(t)},blurred:this.inputBlurredHandler})})]})]})}}]),n}(c.Component)),ge=Object(i.b)(null,(function(e){return{changeQuantity:function(t,n){return e(function(e,t){return{type:E,newQuantity:e,index:t}}(t,n))}}}))(me),ve=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.store||this.props.fetchStoreFetcher()}},{key:"render",value:function(){var e=this,t=[],n=0;return this.props.cart.forEach((function(c,a){n+=parseFloat(c.price)*c.quantity,t.push(Object(r.jsx)(ge,{quantity:c.quantity,name:c.name,price:c.price,reference:c.ref,clicked:function(){return e.props.removeFromCart(a)},index:a},c.ref))})),Object(r.jsxs)("div",{className:"cart-container-component",children:[Object(r.jsx)("h1",{children:"Your Cart"}),Object(r.jsx)("div",{className:"cart-list",children:t}),Object(r.jsxs)("p",{children:["Total amount: US $",n.toFixed(2)]}),Object(r.jsx)(z,{btnType:"filled",children:"Order"})]})}}]),n}(c.Component),xe=Object(i.b)((function(e){return{cart:e.cart}}),(function(e){return{fetchStoreFetcher:function(){return e(q())},removeFromCart:function(t){return e(function(e){return{type:L,index:e}}(t))}}}))(ve),ye=(n(89),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={name:null,description:null,price:null,ref:null},e.renderProduct=function(){e.props.store&&Object.keys(e.props.store).forEach((function(t){if(e.props.store[t].products)for(var n=e.props.store[t].products,r=0,c=Object.entries(n);r<c.length;r++){var a=Object(ae.a)(c[r],2),o=(a[0],a[1]);o.ref===e.props.match.params.id&&e.setState({name:o.productName,description:o.description,price:o.price,ref:o.ref})}}))},e.addToCartHandler=function(t){t.preventDefault(),e.props.cart.every((function(t){return t.ref!==e.state.ref}))&&e.props.addToCart({name:e.state.name,price:e.state.price,ref:e.state.ref,quantity:1}),e.props.history.push("/cart")},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.store?this.renderProduct():this.props.fetchStoreFetcher()}},{key:"componentDidUpdate",value:function(){this.state.ref!==this.props.match.params.id&&this.renderProduct()}},{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{className:"product-page",children:[Object(r.jsx)("h1",{children:this.state.name}),Object(r.jsxs)("div",{className:"spans",children:[Object(r.jsxs)("span",{children:["Price: US $",this.state.price]}),Object(r.jsxs)("span",{children:["Ref: ",this.state.ref]})]}),Object(r.jsxs)("div",{className:"description",children:[Object(r.jsx)("p",{children:"Description:"}),Object(r.jsx)("p",{children:this.state.description})]}),Object(r.jsx)("div",{className:"button-container",children:Object(r.jsx)(z,{btnType:"ghosted",clicked:function(t){return e.addToCartHandler(t)},children:"Add to Cart"})})]})}}]),n}(c.Component)),Ce=Object(i.b)((function(e){return{store:e.store,cart:e.cart}}),(function(e){return{fetchStoreFetcher:function(){return e(q())},closeError:function(){return e(M())},addToCart:function(t){return e(function(e){return{type:H,product:e}}(t))}}}))(Object(d.f)(ye)),we=(n(90),n(91),function(e){return Object(r.jsxs)("div",{className:"product-on-manage-list",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:e.name}),Object(r.jsx)("p",{children:e.reference})]}),Object(r.jsxs)("p",{children:["Stock: ",e.stock]}),Object(r.jsxs)("p",{children:["Price: US $",e.price]}),Object(r.jsx)("span",{onClick:function(){return e.deleteProduct()},children:"Delete element"})]})}),Ne=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={searchForm:{search:{elementType:"input",elementConfig:{type:"text",placeholder:"Search products..."},value:""}},typing:!1},e.inputChangedHandler=function(t){var n=Object(O.a)({},e.state.searchForm),r=Object(O.a)({},n.search);r.value=t.target.value,n.search=r,e.setState({searchForm:n,typing:!0}),""===r.value&&e.setState({typing:!1})},e.inputBlurredHandler=function(){e.setState({typing:!1})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.store||this.props.fetchStoreFetcher(),this.props.hideSearchBoxOnToolbar()}},{key:"render",value:function(){var e=this,t=null;return this.props.loading&&(t="Loading..."),this.props.store&&(t=[],Object.keys(this.props.store).forEach((function(n){if(e.props.store[n].products)for(var c=e.props.store[n].products,a=function(){var c=Object(ae.a)(s[o],2),a=c[0],i=c[1];if((i.productName+i.category+i.ref).toLowerCase().includes(e.state.searchForm.search.value.toLowerCase())){var u=n+"/products/"+a;t.push(Object(r.jsx)(we,{name:i.productName,reference:i.ref,stock:i.stock,price:i.price,deleteProduct:function(){return e.props.deleteProductFetcher(u,n,a)}},i.ref))}},o=0,s=Object.entries(c);o<s.length;o++)a()}))),Object(r.jsxs)("div",{className:"manage-product-container",children:[Object(r.jsx)("h2",{children:"Welcome"}),Object(r.jsx)("form",{children:Object(r.jsx)($,{elementType:this.state.searchForm.search.elementType,elementConfig:this.state.searchForm.search.elementConfig,value:this.state.searchForm.search.value,changed:function(t){return e.inputChangedHandler(t)},blurred:this.inputBlurredHandler})}),Object(r.jsx)("div",{className:"manage-products-list",children:t})]})}}]),n}(c.Component),Te=Object(i.b)((function(e){return{store:e.store,loading:e.loading}}),(function(e){return{hideSearchBoxOnToolbar:function(){return e(U())},fetchStoreFetcher:function(){return e(q())},deleteProductFetcher:function(t,n,r){return e(G(t,n,r))}}}))(Ne),Fe=(n(92),function(e,t,n,r,c){return"input"===e?{elementType:e,elementConfig:{type:t,placeholder:n},value:c||""}:{elementType:e,elementConfig:Object(O.a)(Object(O.a)({},r),{},{placeholder:n}),value:c||""}}),ke=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={newProductForm:{productName:Fe("input","text","Product name"),category:Fe("select",null,"Category",{options:[{value:"",displayValue:""}]}),ref:Fe("input","number","Reference"),price:Fe("input","number","Price (in dollars)"),stock:Fe("input","number","Quantity in stock"),description:Fe("textarea","text","Description")},storeFetched:!1},e.updateCategoryInput=function(){if(!e.state.storeFetched){var t=Object(O.a)({},e.state.newProductForm);t.category=Fe("select",null,"Category",{options:Object.keys(e.props.store).map((function(t){return{value:e.props.store[t].categoryName,displayValue:e.props.store[t].categoryName}}))}),e.setState({newProductForm:t,storeFetched:!0})}},e.orderHandler=function(t){t.preventDefault();var n={};for(var r in e.state.newProductForm)n[r]=e.state.newProductForm[r].value;var c=function(){for(var t in e.state.newProductForm)e.state.newProductForm[t].value=""};if("select"===e.state.newProductForm.category.elementType)e.props.postNewProductFetcher(n,e.state.newProductForm.category.value,null,c);else{var a={categoryName:e.state.newProductForm.category.value};e.props.postNewProductFetcher(n,e.state.newProductForm.category.value,a,c)}},e.inputChangedHandler=function(t,n){var r=Object(O.a)({},e.state.newProductForm),c=Object(O.a)({},r[n]);c.value=t.target.value,r[n]=c,e.setState({newProductForm:r})},e.addNewCategory=function(){var t=e.state.newProductForm,n=Fe("input","text","Category");e.setState({newProductForm:Object(O.a)(Object(O.a)({},t),{},{category:n})})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.store?this.updateCategoryInput():this.props.fetchStoreFetcher(),this.props.hideSearchBoxOnToolbar()}},{key:"componentDidUpdate",value:function(){this.updateCategoryInput()}},{key:"render",value:function(){var e=this,t=[];for(var n in this.state.newProductForm)t.push({id:n,info:this.state.newProductForm[n]});var c=t.map((function(t){return"select"!==t.info.elementType?Object(r.jsx)($,{elementType:t.info.elementType,elementConfig:t.info.elementConfig,value:t.info.value,changed:function(n){return e.inputChangedHandler(n,t.id)}},t.id):Object(r.jsxs)("div",{className:"category-section",children:[Object(r.jsx)($,{elementType:t.info.elementType,elementConfig:t.info.elementConfig,value:t.info.value,changed:function(n){return e.inputChangedHandler(n,t.id)}}),Object(r.jsx)("span",{onClick:e.addNewCategory,children:"Add new category"})]},t.id)}));return Object(r.jsxs)("div",{className:"add-products-container",children:[Object(r.jsx)("h2",{children:"Welcome"}),Object(r.jsx)("p",{children:"Fill the following data to upload the new product"}),Object(r.jsxs)("form",{children:[c,Object(r.jsx)(z,{btnType:"filled",clicked:function(t){return e.orderHandler(t)},children:"Add Product"})]})]})}}]),n}(c.Component),Se=Object(i.b)((function(e){return{store:e.store,error:e.error}}),(function(e){return{hideSearchBoxOnToolbar:function(){return e(U())},fetchStoreFetcher:function(){return e(q())},postNewProductFetcher:function(t,n,r,c){e(function(e,t,n,r){return function(c){c(R()),n?_.put("/store/"+D(t)+".json",n).then(_.post("/store/"+D(t)+"/products.json",e).then((function(n){return c(W(e,D(t),n.data.name,t))})).then(r()).catch((function(e){c(I(e))}))):_.post("/store/"+D(t)+"/products.json",e).then((function(n){return c(W(e,D(t),n.data.name,t))})).then(r()).catch((function(e){c(I(e))}))}}(t,n,r,c))},closeError:function(){return e(M())}}}))(ke);var Ae=function(){return Object(r.jsx)(pe,{children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{path:"/manage-products-list",component:Te}),Object(r.jsx)(d.a,{path:"/add-products",component:Se}),Object(r.jsx)(d.a,{path:"/product/:id",component:Ce}),Object(r.jsx)(d.a,{path:"/cart",component:xe}),Object(r.jsx)(d.a,{path:"/",component:fe})]})})},Pe=n(25),He=n(19),Le={cart:[],store:null,results:null,showLogin:!1,authAsUser:!1,authAsManager:!1,searchBoxOnToolbar:!0,loading:!1,error:null},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(O.a)(Object(O.a)({},e),{},{showLogin:!0});case m:return Object(O.a)(Object(O.a)({},e),{},{showLogin:!1});case g:return Object(O.a)(Object(O.a)({},e),{},{showLogin:!1,authAsUser:!0});case v:return Object(O.a)(Object(O.a)({},e),{},{showLogin:!1,authAsManager:!0});case x:return Object(O.a)(Object(O.a)({},e),{},{authAsManager:!1,authAsUser:!1});case y:return Object(O.a)(Object(O.a)({},e),{},{searchBoxOnToolbar:!0});case C:return Object(O.a)(Object(O.a)({},e),{},{searchBoxOnToolbar:!1});case N:return Object(O.a)(Object(O.a)({},e),{},{results:null});case w:var n=e.error;return e.store&&(n=null),Object(O.a)(Object(O.a)({},e),{},{error:n});case T:return Object(O.a)(Object(O.a)({},e),{},{loading:!0});case F:return Object(O.a)(Object(O.a)({},e),{},{loading:!1,error:t.error.message});case k:return Object(O.a)(Object(O.a)({},e),{},{loading:!1,store:t.store,error:!1});case S:var r=e.store[t.category]?Object(O.a)(Object(O.a)({},e.store[t.category].products),{},Object(He.a)({},t.id,t.newProduct)):Object(He.a)({},t.id,t.newProduct);return Object(O.a)(Object(O.a)({},e),{},{store:Object(O.a)(Object(O.a)({},e.store),{},Object(He.a)({},t.category,{categoryName:t.categoryName,products:r})),loading:!1});case A:var c=Object(O.a)({},e.store);return delete c[t.category].products[t.id],Object(O.a)(Object(O.a)({},e),{},{store:c,loading:!1});case P:var a=[];return Object.keys(t.store).forEach((function(e){if(t.store[e].products)for(var n=t.store[e].products,r=0,c=Object.entries(n);r<c.length;r++){var o=Object(ae.a)(c[r],2),s=(o[0],o[1]);(s.productName+s.category).toLowerCase().includes(t.quest.toLowerCase())&&a.push(s)}})),Object(O.a)(Object(O.a)({},e),{},{results:a});case H:return Object(O.a)(Object(O.a)({},e),{},{cart:[].concat(Object(Pe.a)(e.cart),[t.product])});case L:var o=Object(Pe.a)(e.cart);return o.splice(t.index,1),Object(O.a)(Object(O.a)({},e),{},{cart:o});case E:var s=Object(Pe.a)(e.cart);return s[t.index].quantity=t.newQuantity,Object(O.a)(Object(O.a)({},e),{},{cart:s});default:return e}},Be=(n(93),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))}),_e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,De=Object(u.d)(Ee,_e(Object(u.a)(l.a))),Ue=Object(r.jsx)(i.a,{store:De,children:Object(r.jsx)(s.a,{children:Object(r.jsx)(Ae,{})})});o.a.render(Ue,document.getElementById("root")),Be()}},[[94,1,2]]]);
//# sourceMappingURL=main.34c088e6.chunk.js.map